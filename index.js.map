{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('.load-more-button');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"> \n            </a>\n            <div class=\"gallery-bottom-wrapper\">\n                <div class=\"gallery-inner-wrapper\">\n                    <p class=\"gallery-wrapper-title\">Likes</p>\n                    <p class=\"gallery-wrapper-value\">${likes}</p>\n                    </div>\n                    <div class=\"gallery-inner-wrapper\">\n                        <p class=\"gallery-wrapper-title\">Views</p>\n                        <p class=\"gallery-wrapper-value\">${views}</p>\n                        </div>\n                        <div class=\"gallery-inner-wrapper\">\n                            <p class=\"gallery-wrapper-title\">Comments</p>\n                            <p class=\"gallery-wrapper-value\">${comments}</p>\n                            </div>\n                            <div class=\"gallery-inner-wrapper\">\n                                <p class=\"gallery-wrapper-title\">Downloads</p>\n                                <p class=\"gallery-wrapper-value\">${downloads}</p>\n                                </div>\n                                </div>\n                                </li>`\n    )\n    .join('');\n  galleryList.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\nexport function clearGallery() {\n  galleryList.innerHTML = '';\n}\nexport function showLoader() {\n  loader.classList.remove('hiden');\n}\nexport function hideLoader() {\n  loader.classList.add('hiden');\n}\nexport function showLoadMoreButton() {\n  loadButton.classList.remove('hiden');\n}\nexport function hideLoadMoreButton() {\n  loadButton.classList.add('hiden');\n}","import axios from 'axios';\n\nconst BASEURL = 'https://pixabay.com/api/';\nconst API = '54348219-a06ea9de282acf79dc86455ae';\nexport const PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page) {\n  const { data } = await axios.get(BASEURL, {\n    params: {\n      key: API,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: PER_PAGE,\n    },\n  });\n  return data;\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport { PER_PAGE } from './js/pixabay-api';\n\nconst form = document.querySelector('form');\nconst userInput = document.querySelector('input');\nconst loadMoreButton = document.querySelector('.load-more-button');\nlet page;\nlet query = '';\nlet totalHits = 0;\nlet data;\n\nform.addEventListener('submit', handleForm);\nloadMoreButton.addEventListener('click', handleLoadMore);\n\nasync function handleForm(event) {\n  event.preventDefault();\n  page = 1;\n  query = userInput.value.trim();\n  if (query === '') {\n    return;\n  }\n  clearGallery();\n  hideLoadMoreButton();\n  renderGallery();\n}\n\nfunction handleLoadMore() {\n  page += 1;\n  hideLoadMoreButton();\n  renderGallery();\n}\n\nasync function renderGallery() {\n  showLoader();\n  try {\n    data = await getImagesByQuery(query, page);\n    totalHits = data.totalHits;\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n    createGallery(data.hits);\n    if (page > 1) {\n      smoothScroll();\n    }\n    if (PER_PAGE * page >= data.totalHits) {\n      hideLoadMoreButton();\n      iziToast.warning({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    if (!error.response) {\n      iziToast.warning({ message: 'Please, try again later' });\n      return;\n    }\n    iziToast.warning({ message: `${error.response.status}` });\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction smoothScroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (!galleryItem) {\n    return;\n  }\n  const cardHeight = galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: 2 * cardHeight,\n    behavior: 'smooth',\n  });\n}"],"names":["galleryList","loader","loadButton","lightbox","SimpleLightbox","createGallery","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","BASEURL","API","PER_PAGE","getImagesByQuery","query","page","data","axios","form","userInput","loadMoreButton","totalHits","handleForm","handleLoadMore","event","renderGallery","iziToast","smoothScroll","error","galleryItem","cardHeight"],"mappings":"owBAGA,MAAMA,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,mBAAmB,EACvDC,EAAW,IAAIC,EAAe,YAAY,EAEzC,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,4CACoCN,CAAa;AAAA,8CACXC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,uDAKjBC,CAAK;AAAA;AAAA;AAAA;AAAA,2DAIDC,CAAK;AAAA;AAAA;AAAA;AAAA,+DAIDC,CAAQ;AAAA;AAAA;AAAA;AAAA,mEAIJC,CAAS;AAAA;AAAA;AAAA,sCAIvE,EACA,KAAK,EAAE,EACVd,EAAY,mBAAmB,YAAaO,CAAM,EAClDJ,EAAS,QAAO,CAClB,CACO,SAASY,GAAe,CAC7Bf,EAAY,UAAY,EAC1B,CACO,SAASgB,GAAa,CAC3Bf,EAAO,UAAU,OAAO,OAAO,CACjC,CACO,SAASgB,GAAa,CAC3BhB,EAAO,UAAU,IAAI,OAAO,CAC9B,CACO,SAASiB,GAAqB,CACnChB,EAAW,UAAU,OAAO,OAAO,CACrC,CACO,SAASiB,GAAqB,CACnCjB,EAAW,UAAU,IAAI,OAAO,CAClC,CC5DA,MAAMkB,EAAU,2BACVC,EAAM,qCACCC,EAAW,GAEjB,eAAeC,EAAiBC,EAAOC,EAAM,CAClD,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,IAAIP,EAAS,CACxC,OAAQ,CACN,IAAKC,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUH,CACX,CACL,CAAG,EACD,OAAOI,CACT,CCNA,MAAME,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAY,SAAS,cAAc,OAAO,EAC1CC,EAAiB,SAAS,cAAc,mBAAmB,EACjE,IAAIL,EACAD,EAAQ,GACRO,EAAY,EACZL,EAEJE,EAAK,iBAAiB,SAAUI,CAAU,EAC1CF,EAAe,iBAAiB,QAASG,CAAc,EAEvD,eAAeD,EAAWE,EAAO,CAC/BA,EAAM,eAAc,EACpBT,EAAO,EACPD,EAAQK,EAAU,MAAM,OACpBL,IAAU,KAGdT,IACAI,IACAgB,IACF,CAEA,SAASF,GAAiB,CACxBR,GAAQ,EACRN,IACAgB,GACF,CAEA,eAAeA,GAAgB,CAC7BnB,IACA,GAAI,CAGF,GAFAU,EAAO,MAAMH,EAAiBC,EAAOC,CAAI,EACzCM,EAAYL,EAAK,UACbA,EAAK,KAAK,SAAW,EAAG,CAC1BU,EAAS,QAAQ,CACf,QACE,0EACV,CAAO,EACD,MACD,CACD/B,EAAcqB,EAAK,IAAI,EACnBD,EAAO,GACTY,IAEEf,EAAWG,GAAQC,EAAK,WAC1BP,IACAiB,EAAS,QAAQ,CACf,QAAS,4DACjB,CAAO,GAEDlB,GAEH,OAAQoB,EAAO,CACd,GAAI,CAACA,EAAM,SAAU,CACnBF,EAAS,QAAQ,CAAE,QAAS,yBAA2B,CAAA,EACvD,MACD,CACDA,EAAS,QAAQ,CAAE,QAAS,GAAGE,EAAM,SAAS,MAAM,EAAE,CAAE,CAC5D,QAAY,CACRrB,GACD,CACH,CAEA,SAASoB,GAAe,CACtB,MAAME,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAI,CAACA,EACH,OAEF,MAAMC,EAAaD,EAAY,sBAAqB,EAAG,OACvD,OAAO,SAAS,CACd,IAAK,EAAIC,EACT,SAAU,QACd,CAAG,CACH"}