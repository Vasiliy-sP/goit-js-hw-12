{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('.load-more-button');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n    const markup = images\n    .map(\n        ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        }) =>\n        `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"> \n            </a>\n            <div class=\"gallery-bottom-wrapper\">\n                <div class=\"gallery-inner-wrapper\">\n                    <p class=\"gallery-wrapper-title\">Likes</p>\n                    <p class=\"gallery-wrapper-value\">${likes}</p>\n                    </div>\n                    <div class=\"gallery-inner-wrapper\">\n                        <p class=\"gallery-wrapper-title\">Views</p>\n                        <p class=\"gallery-wrapper-value\">${views}</p>\n                        </div>\n                        <div class=\"gallery-inner-wrapper\">\n                            <p class=\"gallery-wrapper-title\">Comments</p>\n                            <p class=\"gallery-wrapper-value\">${comments}</p>\n                            </div>\n                            <div class=\"gallery-inner-wrapper\">\n                                <p class=\"gallery-wrapper-title\">Downloads</p>\n                                <p class=\"gallery-wrapper-value\">${downloads}</p>\n                                </div>\n                                </div>\n                                </li>`\n    )\n    .join('');\n    galleryList.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n    }\n    export function clearGallery() {\n    galleryList.innerHTML = '';\n    }\n    export function showLoader() {\n    loader.classList.remove('hiden');\n    }\n    export function hideLoader() {\n    loader.classList.add('hiden');\n    }\n    export function showLoadMoreButton() {\n    loadButton.classList.remove('hiden');\n    }\n    export function hideLoadMoreButton() {\n    loadButton.classList.add('hiden');\n}","import axios from 'axios';\n\nconst BASEURL = 'https://pixabay.com/api/';\nconst API = '54348219-a06ea9de282acf79dc86455ae';\nexport const PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page) {\n  const { data } = await axios.get(BASEURL, {\n    params: {\n      key: API,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: PER_PAGE,\n    },\n  });\n  return data;\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n    } from './js/render-functions';\n    import { getImagesByQuery } from './js/pixabay-api';\n    import { PER_PAGE } from './js/pixabay-api';\n\n    const form = document.querySelector('form');\n    const userInput = document.querySelector('input');\n    const loadMoreButton = document.querySelector('.load-more-button');\n    let page;\n    let query = '';\n    let totalHits = 0;\n    let data;\n\n    form.addEventListener('submit', handleForm);\n    loadMoreButton.addEventListener('click', handleLoadMore);\n\n    async function handleForm(event) {\n    event.preventDefault();\n    page = 1;\n    query = userInput.value.trim();\n    if (query === '') {\n    return;\n    }\n    clearGallery();\n    hideLoadMoreButton();\n    renderGallery();\n    }\n\n    function handleLoadMore() {\n    page += 1;\n    hideLoadMoreButton();\nrenderGallery();\n}\n\nasync function renderGallery() {\n    showLoader();\n    try {\n    data = await getImagesByQuery(query, page);\n    totalHits = data.totalHits;\n    if (data.hits.length === 0) {\n        iziToast.warning({\n        message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n    }\n    createGallery(data.hits);\n    if (page > 1) {\n        smoothScroll();\n    }\n    if (PER_PAGE * page >= data.totalHits) {\n        hideLoadMoreButton();\n        iziToast.warning({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        });\n    } else {\n        showLoadMoreButton();\n    }\n    } catch (error) {\n    if (!error.response) {\n        iziToast.warning({ message: 'Please, try again later' });\n        return;\n    }\n    iziToast.warning({ message: `${error.response.status}` });\n    } finally {\n    hideLoader();\n    }\n}\n\nfunction smoothScroll() {\n    const galleryItem = document.querySelector('.gallery-item');\n    if (!galleryItem) {\n    return;\n    }\n    const cardHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n    top: 2 * cardHeight,\n    behavior: 'smooth',\n    });\n}"],"names":["galleryList","loader","loadButton","lightbox","SimpleLightbox","createGallery","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","BASEURL","API","PER_PAGE","getImagesByQuery","query","page","data","axios","form","userInput","loadMoreButton","totalHits","handleForm","handleLoadMore","event","renderGallery","iziToast","smoothScroll","error","galleryItem","cardHeight"],"mappings":"owBAGA,MAAMA,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,mBAAmB,EACvDC,EAAW,IAAIC,EAAe,YAAY,EAEzC,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EACd,IACG,CAAC,CACD,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACC,IACD;AAAA,4CACoCN,CAAa;AAAA,8CACXC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,uDAKjBC,CAAK;AAAA;AAAA;AAAA;AAAA,2DAIDC,CAAK;AAAA;AAAA;AAAA;AAAA,+DAIDC,CAAQ;AAAA;AAAA;AAAA;AAAA,mEAIJC,CAAS;AAAA;AAAA;AAAA,sCAIvE,EACA,KAAK,EAAE,EACRd,EAAY,mBAAmB,YAAaO,CAAM,EAClDJ,EAAS,QAAO,CACf,CACM,SAASY,GAAe,CAC/Bf,EAAY,UAAY,EACvB,CACM,SAASgB,GAAa,CAC7Bf,EAAO,UAAU,OAAO,OAAO,CAC9B,CACM,SAASgB,GAAa,CAC7BhB,EAAO,UAAU,IAAI,OAAO,CAC3B,CACM,SAASiB,GAAqB,CACrChB,EAAW,UAAU,OAAO,OAAO,CAClC,CACM,SAASiB,GAAqB,CACrCjB,EAAW,UAAU,IAAI,OAAO,CACpC,CC5DA,MAAMkB,EAAU,2BACVC,EAAM,qCACCC,EAAW,GAEjB,eAAeC,EAAiBC,EAAOC,EAAM,CAClD,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,IAAIP,EAAS,CACxC,OAAQ,CACN,IAAKC,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUH,CACX,CACL,CAAG,EACD,OAAOI,CACT,CCNI,MAAME,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAY,SAAS,cAAc,OAAO,EAC1CC,EAAiB,SAAS,cAAc,mBAAmB,EACjE,IAAIL,EACAD,EAAQ,GACRO,EAAY,EACZL,EAEJE,EAAK,iBAAiB,SAAUI,CAAU,EAC1CF,EAAe,iBAAiB,QAASG,CAAc,EAEvD,eAAeD,EAAWE,EAAO,CACjCA,EAAM,eAAc,EACpBT,EAAO,EACPD,EAAQK,EAAU,MAAM,OACpBL,IAAU,KAGdT,IACAI,IACAgB,IACC,CAED,SAASF,GAAiB,CAC1BR,GAAQ,EACRN,IACJgB,GACA,CAEA,eAAeA,GAAgB,CAC3BnB,IACA,GAAI,CAGJ,GAFAU,EAAO,MAAMH,EAAiBC,EAAOC,CAAI,EACzCM,EAAYL,EAAK,UACbA,EAAK,KAAK,SAAW,EAAG,CACxBU,EAAS,QAAQ,CACjB,QACI,0EACZ,CAAS,EACD,MACH,CACD/B,EAAcqB,EAAK,IAAI,EACnBD,EAAO,GACPY,IAEAf,EAAWG,GAAQC,EAAK,WACxBP,IACAiB,EAAS,QAAQ,CACjB,QAAS,4DACjB,CAAS,GAEDlB,GAEH,OAAQoB,EAAO,CAChB,GAAI,CAACA,EAAM,SAAU,CACjBF,EAAS,QAAQ,CAAE,QAAS,yBAA2B,CAAA,EACvD,MACH,CACDA,EAAS,QAAQ,CAAE,QAAS,GAAGE,EAAM,SAAS,MAAM,EAAE,CAAE,CAC5D,QAAc,CACVrB,GACC,CACL,CAEA,SAASoB,GAAe,CACpB,MAAME,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAI,CAACA,EACL,OAEA,MAAMC,EAAaD,EAAY,sBAAqB,EAAG,OACvD,OAAO,SAAS,CAChB,IAAK,EAAIC,EACT,SAAU,QACd,CAAK,CACL"}